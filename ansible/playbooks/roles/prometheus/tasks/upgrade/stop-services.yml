---
- name: Prometheus upgrade | Stop Prometheus service
  systemd:
    state: stopped
    name: prometheus
  when:
    - ansible_facts.services["prometheus.service"] is defined

- name: Prometheus upgrade | Stop AlertManager service
  systemd:
    state: stopped
    name: alertmanager
  when:
    - ansible_facts.services["alertmanager.service"] is defined

- name: Prometheus upgrade | Stop Grafana service
  systemd:
    state: stopped
    name: grafana-server
  when:
    - ansible_facts.services["grafana-server.service"] is defined
