#####################################################
# DO NOT Modify by hand - Managed by Automation
#####################################################
#####################################################
# This file can be used as a base template to build other Terraform files. It attempts to use as much
# Terraform interpolation as possible by creating Terraform variables instead of changing inline
# this approach provides an easier way to do creative looping, fetch IDs of created resources etc.
#####################################################
#####################################################
# {{ specification.name }}
#####################################################

terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "=3.71.0"
    }
  }
}

provider "aws" {
  access_key = "{{ specification.cloud.credentials.access_key_id }}"
  secret_key = "{{ specification.cloud.credentials.secret_access_key }}"
{% if specification.cloud.credentials.session_token is defined %}
  token = "{{ specification.cloud.credentials.session_token }}"
{% endif %}
  region     = "{{ specification.cloud.region }}"
  default_tags {
    tags = {
    {%- for tag in specification.cloud.tags %}
      {%- for tag_key, tag_value in tag.items() %}
      {{ tag_key }} = "{{ tag_value }}"
      {%- endfor %}
    {%- endfor %}
    }
  }
}
