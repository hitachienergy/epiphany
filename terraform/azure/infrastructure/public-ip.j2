#####################################################
# DO NOT Modify by hand - Managed by Automation
#####################################################
#####################################################
# This file can be used as a base template to build other Terraform files. It attempts to use as much
# Terraform interpolation as possible by creating Terraform variables instead of changing inline
# this approach provides an easier way to do creative looping, fetch IDs of created resources etc.
#####################################################
#####################################################
# {{ specification.name }}
#####################################################

resource "azurerm_public_ip" "{{ specification.name }}" {
  name                    = "{{ specification.name }}"
{%- if specification.use_managed_resource_group %}
  location                = azurerm_resource_group.rg.location
  resource_group_name     = azurerm_resource_group.rg.name
{%- else %}
  location                = data.azurerm_resource_group.rg.location
  resource_group_name     = data.azurerm_resource_group.rg.name
{%- endif %}
  allocation_method       = "{{ specification.allocation_method }}"
  idle_timeout_in_minutes = "{{ specification.idle_timeout_in_minutes }}"
  sku                     = "{{ specification.sku }}"

  lifecycle {
    ignore_changes = [
      # Zones are no longer computed - if you wish Azure to assign availability zones automatically, you must use ignore_changes.
      # Ref: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/guides/3.0-upgrade-guide#behavioural-updates
      zones
    ]
  }
}
