---
kind: configuration/opensearch
title: OpenSearch Config
name: default
specification:
  cluster_name: EpiphanyOpenSearch
  opensearch_os_user: opensearch
  opensearch_os_group: opensearch
  admin_password: PASSWORD_TO_CHANGE
  kibanaserver_password: PASSWORD_TO_CHANGE
  filebeatservice_password: PASSWORD_TO_CHANGE
  demo_users_to_remove:
    - kibanaro
    - readall
    - snapshotrestore
    - logstash
  paths:
    opensearch_conf_dir: /etc/opensearch
    opensearch_log_dir: /var/log/opensearch
    opensearch_snapshots_dir: /var/lib/opensearch-snapshots
    opensearch_data_dir: /var/lib/opensearch
  jvm_options:
    Xmx: 1g
  opensearch_security:
    audit:
      type: internal_opensearch # https://opensearch.org/docs/latest/security-plugin/audit-logs
    ssl:
      transport:
        enforce_hostname_verification: True
  curator:
    install: True
    delete_indices_cron_jobs:
      - description: Delete indices older than N days
        cron:
          hour: '1'
          minute: '0'
          enabled: True
        filter_list:
          - filtertype: age
            unit_count: 90
            unit: days
            source: creation_date
            direction: older
          - filtertype: pattern
            exclude: true
            kind: regex
            value: ^[.].+$
      - description: Delete the oldest indices to not consume more than N gigabytes of disk space
        cron:
          minute: '*/10'
          enabled: True
        filter_list:
          - filtertype: space
            disk_space: 448 # assuming there is 512 GiB disk
            use_age: True
            source: creation_date
          - filtertype: pattern
            exclude: true
            kind: regex
            value: ^[.].+$
